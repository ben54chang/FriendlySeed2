(()=>{var e=document.querySelector(".air-conditioner-Pop"),t=document.querySelector(".desktop"),n=document.querySelector(".refrigerator"),o=document.querySelector(".television"),c=document.querySelector(".water-heater"),r=document.querySelector(".illumination"),a=document.querySelector(".transportation"),i=document.querySelectorAll(".Pop-close-icon"),l=document.querySelector(".floor-plan1"),s=document.querySelector(".floor-plan2"),u=document.querySelector(".floor-plan3"),d=document.querySelector(".floor-plan4"),y=document.querySelector(".floor-plan5"),f=document.querySelector(".floor-plan-smoke"),m=document.querySelector(".floor-plan-car"),v=document.querySelector(".green-life"),g=document.querySelector(".floor-plan-person"),b=document.querySelector(".check-action"),p=document.querySelector(".card-action"),S=document.querySelector(".login-reg-bac-v2"),E=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];S&&(e?(document.querySelector("#button-action-submit").classList.remove("hide-element"),document.querySelector("#button-action-regular").classList.add("hide-element")):(document.querySelector("#button-action-submit").classList.add("hide-element"),document.querySelector("#button-action-regular").classList.remove("hide-element")))};l.addEventListener("click",(function(){e.style.display="block"})),s.addEventListener("click",(function(){t.style.display="block"})),u.addEventListener("click",(function(){n.style.display="block"})),d.addEventListener("click",(function(){c.style.display="block"})),y.addEventListener("click",(function(){o.style.display="block"})),f.addEventListener("click",(function(){r.style.display="block"})),m.addEventListener("click",(function(){a.style.display="block"})),g.addEventListener("click",(function(){v.style.display="block"})),b.addEventListener("click",(function(){p.style.display="block",E(!0)})),i.forEach((function(i){i.addEventListener("click",(function(){e.style.display="none",t.style.display="none",n.style.display="none",o.style.display="none",c.style.display="none",r.style.display="none",a.style.display="none",v.style.display="none",p.style.display="none",E(!1)}))})),document.addEventListener("DOMContentLoaded",(function(){var e=40,t=document.querySelectorAll(".total"),n=document.querySelectorAll(".cards"),o=document.querySelectorAll(".Select-action"),c=document.getElementById("submitBtn"),r=document.getElementById("submitBtnMobi");c.addEventListener("click",(function(e){var t;t=!1,o.forEach((function(e){e.querySelectorAll("img.cards").length>0&&(t=!0)})),t||(e.preventDefault(),alert("尚未選取行動，無法送出！"))})),r.addEventListener("click",(function(){c.click()}));var a=function(){var e=[];o.forEach((function(t){t.querySelectorAll("img.cards").forEach((function(t){var n={src:t.src,value:t.getAttribute("data-value"),score:t.getAttribute("data-score"),color:t.getAttribute("data-color")};e.push(n)}))})),sessionStorage.setItem("selectedCards",JSON.stringify(e))},i=function(){var t=!1;n.forEach((function(e){var n=e.getAttribute("data-color");e.classList.contains("active")&&"green"===n&&(t=!0)})),n.forEach((function(n){var o=parseInt(n.getAttribute("data-value"),10),c=n.getAttribute("data-color");e<o&&!n.classList.contains("active")||t&&"green"===c&&!n.classList.contains("active")?n.classList.add("option-disabled"):n.classList.remove("option-disabled")}))},l=function(){var e=0,t=0,o=0,c=0,r=0;n.forEach((function(n){if(n.classList.contains("active")){var a=parseInt(n.getAttribute("data-score"),10),i=n.getAttribute("data-color");e+=25*a,"green"!==i&&"purple"!==i&&(t+=50*a,o+=50*a*3),"yellow"!==i&&"brown"!==i||(c+=a),"green"!==i&&"purple"!==i||(r+=a)}}));var a=c+r;document.getElementById("carbonReduction").textContent=e,document.getElementById("electricitySavings").textContent=t,document.getElementById("costSavings").textContent=o,document.getElementById("yellowBrownScore").textContent=c,document.getElementById("greenPurpleScore").textContent=r,document.getElementById("combinedScore").textContent=a;var i={totalCarbonReduction:e,totalElectricitySavings:t,totalCostSavings:o,yellowBrownScore:c,greenPurpleScore:r,combinedScore:a};sessionStorage.setItem("calculationResults",JSON.stringify(i))};n.forEach((function(n){n.addEventListener("click",(function(){var c=parseInt(n.getAttribute("data-value"),10);if(0!==e||n.classList.contains("active")){if(n.classList.contains("active"))n.classList.remove("active"),e+=c,o.forEach((function(e){var t=e.querySelector('img[src="'.concat(n.src,'"]'));t&&e.removeChild(t)}));else{if(0===e||e<c)return;n.classList.add("active"),e-=c;var r=document.createElement("img");r.src=n.src,r.className="cards active",r.setAttribute("data-value",n.getAttribute("data-value")),r.setAttribute("data-score",n.getAttribute("data-score")),r.setAttribute("data-color",n.getAttribute("data-color")),o.forEach((function(e){!function(e,t){for(var n=["yellow","brown","purple","green"],o=t.getAttribute("data-color"),c=Array.from(e.children),r=!1,a=0;a<c.length;a++){var i=c[a].getAttribute("data-color");if(n.indexOf(o)<n.indexOf(i)){e.insertBefore(t,c[a]),r=!0;break}}r||e.appendChild(t)}(e,r.cloneNode(!0))}))}t.forEach((function(t){t.textContent=e})),i(),a(),l()}}))})),o.forEach((function(o){o.addEventListener("click",(function(o){var c=o.target.closest("img.cards");if(c){var r=parseInt(c.getAttribute("data-value"),10);e+=r,c.remove();var s=Array.from(n).find((function(e){return e.src===c.src&&e.getAttribute("data-value")===c.getAttribute("data-value")}));s&&s.classList.remove("active"),t.forEach((function(t){t.textContent=e})),i(),a(),l()}}))})),(JSON.parse(sessionStorage.getItem("selectedCards"))||[]).forEach((function(t){var c=Array.from(n).find((function(e){return e.src===t.src&&e.getAttribute("data-value")===t.value}));c&&(c.classList.add("active"),e-=parseInt(c.getAttribute("data-value"),10),function(e){var t=document.createElement("img");t.src=e.src,t.className="cards active",t.setAttribute("data-value",e.getAttribute("data-value")),t.setAttribute("data-score",e.getAttribute("data-score")),t.setAttribute("data-color",e.getAttribute("data-color")),o.forEach((function(e){e.appendChild(t.cloneNode(!0))}))}(c))})),t.forEach((function(t){t.textContent=e})),i()}))})();