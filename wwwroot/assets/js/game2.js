(()=>{var e=document.querySelector(".mamaLi-floor1"),t=document.querySelector(".mamaLi-floor2"),n=document.querySelector(".mamaLi-floor3"),o=document.querySelector(".mamaLi-floor4"),r=document.querySelector(".mamaLi-floor5"),c=document.querySelector(".mamaLi-floor6"),a=document.querySelector(".mamaLi-floor7"),i=document.querySelector(".mama-illumination"),l=document.querySelector(".mama-transportation"),s=document.querySelector(".mama-gree-life"),u=document.querySelector(".check-action"),d=document.querySelector(".card-action"),m=document.querySelectorAll(".Pop-close-icon"),y=document.querySelector(".air-conditioner-Pop"),v=document.querySelector(".desktop"),f=document.querySelector(".electric-water"),g=document.querySelector(".clothes-dryer"),b=document.querySelector(".refrigerator"),S=document.querySelector(".living-room"),p=document.querySelector(".television"),E=document.querySelector(".illumination"),L=document.querySelector(".transportation"),A=document.querySelector(".green-life"),q=document.querySelector(".login-reg-bac-v2"),k=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];q&&(e?(document.querySelector("#button-action-submit").classList.remove("hide-element"),document.querySelector("#button-action-regular").classList.add("hide-element")):(document.querySelector("#button-action-submit").classList.add("hide-element"),document.querySelector("#button-action-regular").classList.remove("hide-element")))};m.forEach((function(e){e.addEventListener("click",(function(){d.style.display="none",y.style.display="none",v.style.display="none",f.style.display="none",g.style.display="none",b.style.display="none",S.style.display="none",p.style.display="none",E.style.display="none",L.style.display="none",A.style.display="none",k(!1)}))})),u.addEventListener("click",(function(){d.style.display="block",k(!0)})),e.addEventListener("click",(function(){y.style.display="block"})),t.addEventListener("click",(function(){f.style.display="block"})),n.addEventListener("click",(function(){g.style.display="block"})),o.addEventListener("click",(function(){b.style.display="block"})),r.addEventListener("click",(function(){S.style.display="block"})),c.addEventListener("click",(function(){p.style.display="block"})),a.addEventListener("click",(function(){v.style.display="block"})),i.addEventListener("click",(function(){E.style.display="block"})),l.addEventListener("click",(function(){L.style.display="block"})),s.addEventListener("click",(function(){A.style.display="block"})),document.addEventListener("DOMContentLoaded",(function(){var e=130,t=document.querySelectorAll(".total"),n=document.querySelectorAll(".cards"),o=document.querySelectorAll(".Select-action"),r=document.getElementById("submitBtn"),c=document.getElementById("submitBtnMobi");r.addEventListener("click",(function(e){var t;t=!1,o.forEach((function(e){e.querySelectorAll("img.cards").length>0&&(t=!0)})),t||(e.preventDefault(),alert("尚未選取行動，無法送出！"))})),c.addEventListener("click",(function(){r.click()}));var a=function(){var e=[];o.forEach((function(t){t.querySelectorAll("img.cards").forEach((function(t){var n={src:t.src,value:t.getAttribute("data-value"),score:t.getAttribute("data-score"),color:t.getAttribute("data-color")};e.push(n)}))})),sessionStorage.setItem("selectedCards",JSON.stringify(e))},i=function(){var t=0;n.forEach((function(e){var n=e.getAttribute("data-color");e.classList.contains("active")&&"green"===n&&t++})),n.forEach((function(n){var o=parseInt(n.getAttribute("data-value"),10),r=n.getAttribute("data-color");e<o&&!n.classList.contains("active")||t>=2&&"green"===r&&!n.classList.contains("active")?n.classList.add("option-disabled"):n.classList.remove("option-disabled")}))},l=function(){var e=0,t=0,o=0,r=0,c=0;n.forEach((function(n){if(n.classList.contains("active")){var a=parseInt(n.getAttribute("data-score"),10),i=n.getAttribute("data-color");e+=25*a,"green"!==i&&"purple"!==i&&(t+=50*a,o+=50*a*3),"yellow"!==i&&"brown"!==i||(r+=a),"green"!==i&&"purple"!==i||(c+=a)}}));var a=r+c;document.getElementById("carbonReduction").textContent=e,document.getElementById("electricitySavings").textContent=t,document.getElementById("costSavings").textContent=o,document.getElementById("yellowBrownScore").textContent=r,document.getElementById("greenPurpleScore").textContent=c,document.getElementById("combinedScore").textContent=a;var i={totalCarbonReduction:e,totalElectricitySavings:t,totalCostSavings:o,yellowBrownScore:r,greenPurpleScore:c,combinedScore:a};sessionStorage.setItem("calculationResults",JSON.stringify(i))},s=function(e,t){for(var n=["yellow","brown","purple","green"],o=t.getAttribute("data-color"),r=Array.from(e.children),c=!1,a=0;a<r.length;a++){var i=r[a].getAttribute("data-color");if(n.indexOf(o)<n.indexOf(i)){e.insertBefore(t,r[a]),c=!0;break}}c||e.appendChild(t)};n.forEach((function(n){n.addEventListener("click",(function(){var r=parseInt(n.getAttribute("data-value"),10);if(0!==e||n.classList.contains("active")){if(n.classList.contains("active"))n.classList.remove("active"),e+=r,o.forEach((function(e){var t=e.querySelector('img[src="'.concat(n.src,'"]'));t&&e.removeChild(t)}));else{if(0===e||e<r)return;n.classList.add("active"),e-=r;var c=document.createElement("img");c.src=n.src,c.className="cards active",c.setAttribute("data-value",n.getAttribute("data-value")),c.setAttribute("data-score",n.getAttribute("data-score")),c.setAttribute("data-color",n.getAttribute("data-color")),o.forEach((function(e){s(e,c.cloneNode(!0))}))}t.forEach((function(t){t.textContent=e})),i(),a(),l()}}))})),o.forEach((function(o){o.addEventListener("click",(function(o){var r=o.target.closest("img.cards");if(r){var c=parseInt(r.getAttribute("data-value"),10);e+=c,r.remove();var s=Array.from(n).find((function(e){return e.src===r.src&&e.getAttribute("data-value")===r.getAttribute("data-value")}));s&&s.classList.remove("active"),t.forEach((function(t){t.textContent=e})),i(),a(),l()}}))})),(JSON.parse(sessionStorage.getItem("selectedCards"))||[]).forEach((function(r){var c=Array.from(n).find((function(e){return e.src===r.src&&e.getAttribute("data-value")===r.value}));c&&(c.classList.add("active"),e-=parseInt(c.getAttribute("data-value"),10),function(r){var c=document.createElement("img");c.src=r.src,c.className="cards active",c.setAttribute("data-value",r.getAttribute("data-value")),c.setAttribute("data-score",r.getAttribute("data-score")),c.setAttribute("data-color",r.getAttribute("data-color")),o.forEach((function(o){var r=c.cloneNode(!0);s(o,r),r.addEventListener("click",(function(){var o=parseInt(r.getAttribute("data-value"),10);e+=o,r.remove();var c=Array.from(n).find((function(e){return e.src===r.src&&e.getAttribute("data-value")===r.getAttribute("data-value")}));c&&c.classList.remove("active"),t.forEach((function(t){t.textContent=e})),i(),a(),l()}))}))}(c))})),t.forEach((function(t){t.textContent=e})),i()}))})();