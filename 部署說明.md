# FriendlySeed 部署說明

## 發佈完成

專案已成功發佈到 `publish` 目錄，包含以下檔案：

### 📁 發佈目錄結構
```
publish/
├── FriendlySeed.dll                    # 主要應用程式
├── FriendlySeed.exe                    # 可執行檔
├── appsettings.json                    # 開發環境設定
├── appsettings.Production.json         # 正式環境設定
├── wwwroot/                           # 靜態檔案目錄
├── start-dev.bat                      # 開發環境啟動腳本
├── start-prod.bat                     # 正式環境啟動腳本
├── test-publish.bat                   # 測試腳本
└── README.md                          # 使用說明
```

## 🚀 啟動方式

### 開發環境 (Port 8054)
```bash
# 方法 1: 使用啟動腳本
cd publish
start-dev.bat

# 方法 2: 直接執行
cd publish
dotnet FriendlySeed.dll --urls "http://localhost:8054"

# 方法 3: 使用測試腳本
test-publish.bat
```

### 正式環境 (Port 80)
```bash
# 方法 1: 使用啟動腳本
cd publish
start-prod.bat

# 方法 2: 直接執行
cd publish
dotnet FriendlySeed.dll --urls "http://localhost:80" --environment Production
```

## 🌐 存取網址

### 開發環境
- **首頁**: http://localhost:8054
- **後台管理**: http://localhost:8054/Admin
- **角色管理**: http://localhost:8054/Admin/Role
- **文章管理**: http://localhost:8054/Admin/Article
- **使用者管理**: http://localhost:8054/Admin/User
- **教師管理**: http://localhost:8054/Admin/Teacher

### 正式環境
- **首頁**: http://localhost:80
- **後台管理**: http://localhost:80/Admin
- **角色管理**: http://localhost:80/Admin/Role
- **文章管理**: http://localhost:80/Admin/Article
- **使用者管理**: http://localhost:80/Admin/User
- **教師管理**: http://localhost:80/Admin/Teacher

## ⚙️ 系統需求

### 必要條件
- **.NET 8.0 Runtime** (已安裝)
- **Microsoft SQL Server** (已設定)
- **Windows Server** 或 **Windows 10/11**

### 資料庫設定
- 資料庫名稱: `FriendlySeed`
- 連線字串: `Server=localhost;Database=FriendlySeed;Trusted_Connection=true;TrustServerCertificate=true;`

## 📋 功能清單

### 已實作功能
- ✅ **角色管理**: 完整的 CRUD 功能，使用 Store Procedure
- ✅ **選單權限**: 角色與選單的多對多關聯
- ✅ **使用者管理**: 使用者 CRUD 和密碼管理
- ✅ **文章管理**: 文章 CRUD 和檔案上傳
- ✅ **教師管理**: 教師帳號管理
- ✅ **檔案總管**: 檔案上傳和管理
- ✅ **動態選單**: 後台左側選單動態載入

### 技術特色
- **Store Procedure**: 角色新增和更新使用資料庫 Store Procedure
- **權限控制**: 基於角色的權限管理
- **檔案上傳**: 支援多種檔案格式
- **響應式設計**: 使用 LTEAdmin + Bootstrap
- **即時驗證**: 前端和後端表單驗證

## 🔧 設定說明

### 環境變數
- **開發環境**: `ASPNETCORE_ENVIRONMENT=Development`
- **正式環境**: `ASPNETCORE_ENVIRONMENT=Production`

### 日誌設定
- **開發環境**: Information 等級
- **正式環境**: Warning 等級
- **日誌檔案**: `Logs/log-{日期}.txt`

## 🛠️ 維護說明

### 定期維護
1. **檢查日誌檔案**: 監控 `Logs/` 目錄
2. **資料庫備份**: 定期備份 FriendlySeed 資料庫
3. **檔案清理**: 清理 `wwwroot/uploads/` 中的舊檔案

### 更新部署
1. 停止目前執行的應用程式
2. 替換 `FriendlySeed.dll` 和相關檔案
3. 重新啟動應用程式

## 🚨 故障排除

### 常見問題
1. **Port 被佔用**
   - 檢查是否有其他程式使用 Port 8054 或 80
   - 使用 `netstat -an | findstr :8054` 檢查

2. **資料庫連線失敗**
   - 檢查 SQL Server 服務是否啟動
   - 確認資料庫連線字串正確

3. **檔案上傳失敗**
   - 檢查 `wwwroot/uploads/` 目錄權限
   - 確保目錄存在且可寫入

4. **應用程式無法啟動**
   - 檢查 .NET 8.0 Runtime 是否安裝
   - 檢查日誌檔案中的錯誤訊息

## 📞 支援資訊

如有問題，請檢查：
1. 日誌檔案: `Logs/log-{日期}.txt`
2. 應用程式設定: `appsettings.json`
3. 資料庫連線狀態

---

**發佈時間**: 2025-09-08  
**版本**: 1.0.0  
**環境**: .NET 8.0 + SQL Server

