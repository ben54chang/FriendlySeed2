@model FriendlySeed.Models.EmailSettings

@{
    ViewData["Title"] = "郵件設定";
}

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-envelope"></i> 郵件設定
                </h3>
            </div>
            <div class="card-body">
                <form asp-action="Index" method="post">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="SendMethod" class="form-label">寄信方式</label>
                                <select asp-for="SendMethod" class="form-control">
                                    <option value="SMTP">SMTP</option>
                                    <option value="Sendmail">Sendmail</option>
                                    <option value="GmailAPI">Gmail API</option>
                                </select>
                                <span asp-validation-for="SendMethod" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="SenderEmail" class="form-label">寄件人信箱</label>
                                <input asp-for="SenderEmail" type="email" class="form-control" placeholder="請輸入寄件人信箱" />
                                <span asp-validation-for="SenderEmail" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="SenderName" class="form-label">寄件人名稱</label>
                                <input asp-for="SenderName" class="form-control" placeholder="請輸入寄件人名稱" />
                                <span asp-validation-for="SenderName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="SmtpHost" class="form-label">SMTP 主機</label>
                                <input asp-for="SmtpHost" class="form-control" placeholder="請輸入 SMTP 主機位址" />
                                <span asp-validation-for="SmtpHost" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="SmtpPort" class="form-label">SMTP 連接埠</label>
                                <input asp-for="SmtpPort" type="number" class="form-control" placeholder="請輸入 SMTP 連接埠" />
                                <span asp-validation-for="SmtpPort" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="EncryptionType" class="form-label">加密方式</label>
                                <select asp-for="EncryptionType" class="form-control">
                                    <option value="">請選擇加密方式</option>
                                    <option value="None">無加密</option>
                                    <option value="TLS">TLS</option>
                                    <option value="SSL">SSL</option>
                                </select>
                                <span asp-validation-for="EncryptionType" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="SmtpUsername" class="form-label">SMTP 帳號</label>
                                <input asp-for="SmtpUsername" class="form-control" placeholder="請輸入 SMTP 帳號" />
                                <span asp-validation-for="SmtpUsername" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label asp-for="SmtpPassword" class="form-label">SMTP 密碼</label>
                                <input asp-for="SmtpPassword" type="password" class="form-control" placeholder="請輸入 SMTP 密碼" />
                                <span asp-validation-for="SmtpPassword" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <div class="form-check">
                                    <input asp-for="UseGmailAPI" class="form-check-input" />
                                    <label asp-for="UseGmailAPI" class="form-check-label">使用 Gmail API</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <div class="form-check">
                                    <input asp-for="IsActive" class="form-check-input" />
                                    <label asp-for="IsActive" class="form-check-label">啟用郵件功能</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> 儲存設定
                        </button>
                        <a href="@Url.Action("Index", "Home", new { area = "Admin" })" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> 返回首頁
                        </a>
                        <button type="button" class="btn btn-info" onclick="testEmail()">
                            <i class="fas fa-paper-plane"></i> 測試郵件
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    
    <script>
        function testEmail() {
            if (confirm('確定要發送測試郵件嗎？')) {
                // 這裡可以加入測試郵件的 AJAX 請求
                alert('測試郵件功能尚未實作');
            }
        }
    </script>
}
